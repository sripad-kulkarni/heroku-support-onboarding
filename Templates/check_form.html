<!DOCTYPE html>
<html>
{% load static %}

<body >
	<div class="container-md" style="background-image: url({% static 'overview.png' %}); background-size: 50%; background-repeat:no-repeat; background-position: center;">

		<div class="gap-3" style="margin: auto;">
			<div class="row">
				<div class="col p-2 mx-auto">
					<div class="row home-bg">
						<div class="row">
							<div class="col">
								<h6>Overall Weeks progress</h6>
								<div class="progress" style="background-color: white;">
								  <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: {{onb.progress}}%;">{{onb.progress}}</div>
								</div>
							</div>
							<figcaption class="blockquote-footer">
							  {{prof.profile.firstname}}'s progress of <cite title="Source Title">all weeks</cite>
							</figcaption>
						</div>
					</div>
					<div class="row home-bg" style="max-height: 300px;">
						<div class="col">
							<h6 style="margin-bottom: 10px;">Week wise progress</h6><hr style="margin: 2px;">
							<table class="table align-middle table-responsive table-hover" >
								<tbody>
									{% if nh_week %}
									{% for nh_week in nh_week %}
									<tr class='clickable-row'>
										<td>
											<small class="">Week {{ nh_week.weekid }} - {{ nh_week.weektitle }}</small>
											<div class="progress" style="background-color: white;">
											  <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: {{nh_week.status}}%;">{{nh_week.status}}</div>
											</div>
										</td>
										<td style="	color: #154e8d;">
											<center>
											<button class="btn btn-outline-secondary btn-sm back-overview" onclick="week_content({{ nh_week.weekid }})" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal" >
												&#10095;</button>

											</center>
										</td>
									</tr>
									{% endfor %}
									{% else %}
									<tr><td>
										<div class="overlay">
										  <div class="text">No Weeks Found</div>
										</div>
									</td></tr>
									{% endif %}
								</tbody>
							</table>
						</div>
					</div>
					<div class="row home-bg" style="max-height: 300px;">
						<div class="col">
							<h6 style="margin-bottom: 10px;">Access Requests</h6><hr style="margin: 2px;">
					  		{% for tab in tabs %}
					  		<div class="accordion" id="accordionPanelsStayOpenExample" >
					  		  <div class="accordion-item">
					  		    <h2 class="accordion-header" id="panelsStayOpen-headingOne">
					  		      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-{{ tab.name }}" aria-expanded="true" aria-controls="panelsStayOpen-{{ tab.name }}" style="clear: both;">
					  		        {{ tab.name }} &nbsp;
					  		        <label class="text-muted">[Approved - {{tab.approved}}/{{tab.item_count}}]</label>
					  		      </button>
					  		    </h2>
					  		    <div id="panelsStayOpen-{{ tab.name }}" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOne">
					  		      <div class="accordion-body">
					  		        
					  		      	<table class="table table-sm table-responsive table-hover" style="vertical-align: middle; margin-bottom: 0px;">
					  		      	  <tbody>
					  		  			{% for item in items %}
					  		  			{% if item.newhire_access_section.name == tab.name %}
					  		      	    <tr>
				  		      	          <td><small class="text-muted">{{ item.name }}</small></td>
				  		      	          <td class="col-sm-2">
				  		      	          	{% if item.status == 'Approved' %}
				  		      	          	<small  style="color: green;">{{ item.status }}</small>
				  		      	          	{% elif item.status == 'Requested' %}
				  		      	          	<small style="color: yellow;">{{ item.status }}</small>
				  		      	          	{% else %}
				  		      	          	<small  style="color: red;">{{ item.status }}</small>
				  		      	          	{% endif %}
				  		      	          </td>
				  		      	        </tr>
				  		      	        {% endif %}
				  		      	  		{% endfor %}
					  		      	    </tbody>
					  		      	</table>
					  		      </div>
					  		    </div>
					  		  </div>
					  		</div>
					  		{% endfor %}
						</div>
					</div>
				</div>
				<div class="col-md-4 p-2">
					<div class="row home-bg">
						<div class="row" style="margin-bottom: 10px;">
							<strong id="demo"></strong> 
							<small class="text-muted" id="demo-a"></small>
						</div>
						<hr>
						<div class="row">
							<div class="col">
								<table class="table table-borderless table-sm table-responsive">
									<tbody>
										<tr>
											<td><b>Trail Guide</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.trailguide %}
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
										<tr>
											<td><b>Onboarding Buddy</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.onboardingbuddy %}
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
										<tr>
											<td><b>Manager</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.the_manager %}	
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
									</tbody>
								</table>
							</div>
						</div>
	
					</div>
					<!--<div class="row home-bg" style="max-height: 225px">
						<strong>{{prof.profile.firstname}}'s Targets</strong>
						<div style="margin-top: 10px;">
							<div class="progress" >
							  <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: {{ nh_t_progress }}%">{{nh_t_progress}}</div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<div class="col">
								<table class="table table-borderless table-sm table-hover table-responsive">
									<tbody>
										{% if nh_targets %}
										{% for nh_targets in nh_targets %}
										<tr>
											<td>{{ nh_targets.target }}</td>
											{% if nh_targets.status == True %}
											<td><input class="form-check-input" type="checkbox" id="flexCheckDefault" checked disabled></td>
											{% else %}
											<td><input class="form-check-input" type="checkbox" id="flexCheckDefault" disabled></td>
											{% endif %}
										</tr>
										{% endfor %}
										{% else %}
										<tr><td colspan="2">
											<div class="overlay">
											  <div class="text">No Targets Found</div>
											</div>
										</td></tr>
										{% endif %}
									</tbody>
								</table>
							</div>

						</div>
					</div>-->
					<div class="row home-bg" style="max-height: 225px">
						<div style="margin-bottom: 10px;">
							<strong>Resources</strong>
						</div>
						<hr>
						<div class="row">
							<div class="col">
								<table class="table table-borderless table-sm table-hover table-responsive">
									<tbody>
										<tr>
											<td><a href="">Onboarding Queries</a></td>
											<td><a href="" class="fa fa-duotone fa-pen"></a></td>
											<td><a href="" class="far fa-trash-alt"></a></td>
										</tr>
									</tbody>
								</table>
								<center><button class="btn btn-outline-secondary btn-sm">New</button></center>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
	<script>
	sd = "{{prof.profile.startdate|date:'M d, Y'}}";
	cd = "{{prof.profile.enddate|date:'M d, Y'}}";

	var countDownDate = new Date(cd).getTime();
	var startDate = new Date(sd).getTime();

	var secondsInADay = 60 * 60 * 1000 * 24,
	    secondsInAHour = 60 * 60 * 1000;

	$(document).ready(function() {

		$(".progress-bar").addClass();
		$(".progress-bar").addClass("progress-bar-animated");

		$(".fa-home").addClass("active");

	  	var period = Math.floor(((countDownDate - startDate)/ (secondsInADay) * 1) + 1);

	  	var now = new Date().getTime();

	  	var left = Math.floor(((countDownDate - now)/ (secondsInADay) * 1) + 1);

	  	var current = (period - left);
	  	if (current<=period) {
	  		document.getElementById("demo").innerHTML = "Day " + (current) + " of " + (period) ;
	  		document.getElementById("demo-a").innerHTML = "Onboarding ends on " + cd ;
	  	}
	  	else {
	  		document.getElementById("demo").innerHTML = "Onboarding ended on " + cd;
	  	}


/*	  	console.log(period);
	  	console.log(left);
	  	console.log(now);
	  	console.log(current);
	  	console.log(countDownDate);
*/	    
	});
	$('#nh_content').on("load",function(){
	  $(".load").fadeOut("slow");
	  console.log('Loaded');
	});
	</script>
</html>