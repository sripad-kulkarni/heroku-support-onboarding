{% extends 'base.html' %}

{% block content %}

	<div class="container-md home-content">
		<blockquote class="blockquote">
			<p class="h4 welcome-font"><strong>Welcome Back, {{ user.profile.firstname }}!</strong></p>		
		</blockquote>	
	</div>
	<div class="container-md">
		<div class="">
			<div class="col-md-8">
				<h4>
					Your Onboarding
				  	<small class="text-muted">Summary</small>
				</h4>
			</div>
		</div>
		<div class="gap-3" style="margin: auto;">
			<div class="row">
				<div class="col p-2 mx-auto">
					<div class="row home-bg">
						<div class="row">
							<div class="col">
								<h6>Weeks progress</h6>
								<div class="progress" style="background-color: white;">
								  <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">{{perc}}</div>
								</div>
							</div>
							<figcaption class="blockquote-footer">
							  This is your overall progress of <cite title="Source Title">all weeks</cite>
							</figcaption>
						</div>
					</div>
					<div class="row home-bg" style="max-height: 300px;">
						<h6 style="margin-bottom: 20px;">Week wise progress</h6>
					</div>
				</div>
				<div class="col-md-4 p-2">
					<div class="row home-bg">
						<div class="row" style="margin-bottom: 10px;">
							<strong id="demo"></strong> 
							<small class="text-muted" id="demo-a"></small>
						</div>
						<hr>
						<div class="row">
							<div class="col">
								<table class="table table-borderless table-sm table-responsive">
									<tbody>
										<tr>
											<td><b>Trail Guide</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.trailguide %}
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
										<tr>
											<td><b>Onboarding Buddy</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.onboardingbuddy %}
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
										<tr>
											<td><b>Manager</b></td>
											{% for usr in usr %}
											{% if usr.username == onb.the_manager %}	
											<td>{{usr.profile.firstname}} {{ usr.profile.lastname }}</td>
											{% endif %}
											{% endfor %}
										</tr>
									</tbody>
								</table>
							</div>
						</div>
	
					</div>
					<div class="row home-bg" style="max-height: 225px">
						<strong>Your Targets</strong>
						<div style="margin-top: 10px;">
							<div class="progress" >
							  <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
							</div>
						</div>
						<div class="row" style="margin-top: 10px;">
							<div class="col">
								<table class="table table-borderless table-sm table-hover table-responsive">
									<tbody>
										<tr>
											<td></td>
											<td><input id="week_check" class="form-check-input" type="checkbox" id="flexCheckDefault"></td>
										</tr>
									</tbody>
								</table>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	

	<script>
	sd = "{{prof.profile.startdate|date:'M d, Y'}}";
	cd = "{{prof.profile.enddate|date:'M d, Y'}}";

	var countDownDate = new Date(cd).getTime();
	var startDate = new Date(sd).getTime();

	var secondsInADay = 60 * 60 * 1000 * 24,
	    secondsInAHour = 60 * 60 * 1000;

	$(document).ready(function() {

		$(".progress-bar").css("width", "{{perc}}%");
		console.log({{perc}});
		if("{{perc}}"<100 && "{{perc}}">0){
			$(".progress-bar").addClass("progress-bar-animated");
		}
		else {
			$(".progress-bar").removeClass("progress-bar-animated");	
		}
		
		$(".fa-home").addClass("active");

	  	var period = Math.floor(((countDownDate - startDate)/ (secondsInADay) * 1) + 1);

	  	var now = new Date().getTime();

	  	var left = Math.floor(((countDownDate - now)/ (secondsInADay) * 1) + 1);

	  	var current = (period - left);
	  	if (current<=period) {
	  		document.getElementById("demo").innerHTML = "Day " + (current) + " of " + (period) ;
	  		document.getElementById("demo-a").innerHTML = "Onboarding ends on " + cd ;
	  	}
	  	else {
	  		document.getElementById("demo").innerHTML = "Onboarding ended on " + cd;
	  	}


/*	  	console.log(period);
	  	console.log(left);
	  	console.log(now);
	  	console.log(current);
	  	console.log(countDownDate);
*/	    
	});
	</script>

{% endblock %}